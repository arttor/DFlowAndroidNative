swagger: '2.0'
info:
  version: 0.0.1-SNAPSHOT
  title: DFlow
basePath: /
paths:
  /vehicles:
    get:
      summary: Receives cars within "range" meters from user.
      produces:
        - application/json
      parameters:
        - name: latLng
          in: query
          description: comma-separated latitude and longtitude coordinates
          example: '40.741895,-73.989308'
          required: true
          type: string
        - name: range
          in: query
          description: search radius from "latLng" in meters
          example: 3000
          required: true
          type: integer
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/Car'
  /book:
    post:
      summary: Book the car.
      produces:
        - application/json
      consumes:
        - application/json
      parameters:
        - in: body
          name: body
          description: Car booking request
          required: true
          schema:
            $ref: '#/definitions/BookRequest'
      responses:
        '200':
          description: Success
        
definitions:
  Car:
    type: object
    properties:
      id:
        type: string
        example: '12345'
        description: >-
          Car identifier
      lat:
        type: number
        example: 25.2
        description: Car latitude.
      lng:
        type: number
        example: 9.0
        description: Car longitude.
      name:
        type: string
        example: "Tesla Model X"
        description: Car model.
      sign:
        type: string
        example: "380 THX"
        description: Car sign.
      tariffs:
        type: array
        items:
          $ref: '#/definitions/Tariff'
      chargingLevel:
        type: number
        example: 99.8
        description: Battery charging level in percents.
      seats:
        type: integer
        example: 5
        description: Seats in car
      timeZone:
        type: string
        example: "-08:00"
        description: vehicle time zone in ISO
      timeSlots:
        type: array
        items:
          $ref: '#/definitions/TimeSlot'
      transmission:
        type: string
        example: ROB
        description: >-
          Identifier of the car transmission (ROB - robot, VAR - variable speed drive, MAN - manual, AUT - automatic).
        enum:
          - ROB
          - VAR
          - MAN
          - AUT
    description: Car
  Tariff:
    type: object
    properties:
      currency:
        type: string
        example: "EUR"
        description: >-
          Currency of the CDR in ISO 4217 Code.
      ridePrice:
        type: number
        example: 1.2
        description: Price for 1 minute of ride.
      waitPrice:
        type: number
        example: 0.2
        description: Price for 1 minute of paid waiting.
      freeWaitTime:
        type: integer
        example: 20
        description: Time of free car waiting in minutes
    description: Tariff
  TimeSlot:
    type: object
    properties:
      id: 
        type: string
        example: "sjd3im3"
        description: time slot UUID
      start: 
        type: number
        example: 1392855800
        description: start time.
      end:
        type: number
        example: 1392857600
        description: end time.
    description: TimeSlot
  BookRequest:
    type: object
    properties:
      carId:
        type: string
        example: '12345'
        description: Car id
      userId:
        type: string
        example: '123456'
        description: User id
      timeSlots:
        type: array
        items:
          type: string
          example: '12345'
        description: booked time slots
